(()=>{var e={627:()=>{var e;if(e){if("object"!=typeof e)throw new Error("rahe already exists and not an object")}else e={};if(e.sis){if("object"!=typeof e.sis)throw new Error("rahe.sis already exists and not an object")}else e.sis={};e.sis.featured={messageZone:"",parent:"",element:"",init:function(){this.element=jQuery("#sis_featured_regenerate"),this.parent=this.element.closest(".inside"),this.nonce=this.element.attr("data-nonce"),this.id=jQuery("#post_ID").val(),this.parent.on("click","#sis_featured_regenerate",(function(t){t.preventDefault(),e.sis.featured.regenItem()}))},setMessage:function(e){this.parent.find(".sis_message").html("<p>"+e+"</p>").show()},regenItem:function(){var e=this;jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:"sis_rebuild_featured",id:this.id,nonce:this.nonce},beforeSend:function(){e.parent.find(".spinner").addClass("is-active"),e.parent.find("#sis_featured_regenerate").attr("disabled","disabled")},success:function(t){var s="";s=!t.time||t.error||"object"!=typeof t?"object"!=typeof t?s=window.sis.phpError:t.error:window.sis.soloRegenerated.replace("%s",t.time),e.setMessage(s),e.parent.find(".spinner").removeClass("is-active"),e.parent.find("#sis_featured_regenerate").removeAttr("disabled")}})}},jQuery((function(){e.sis.featured.init()}))},499:()=>{var e;if(e){if("object"!=typeof e)throw new Error("rahe already exists and not an object")}else e={};if(e.sis){if("object"!=typeof e.sis)throw new Error("rahe.sis already exists and not an object")}else e.sis={};e.sis.regenerate={post_types:[],thumbnails:[],total:0,cur:0,timeScript:[],dateScript:"",percent:"",percentText:null,progress:null,messageZone:null,sisZone:null,time:null,timeZone:null,buttonRegenerate:null,errorZone:null,errorMessages:null,thumb:null,thumbImg:null,init:function(){this.sisZone=jQuery(".sis"),this.percentText=jQuery("#sis_progress-percent"),this.progress=jQuery(".progress"),this.messageZone=this.sisZone.find(".regenerate_message"),this.time=this.sisZone.find(".time"),this.timeZone=this.time.find("p span.time_message"),this.buttonRegenerate=jQuery("#ajax_thumbnail_rebuild"),this.errorZone=jQuery("#error_messages"),this.errorMessages=this.errorZone.find("ul.messages"),this.thumb=this.sisZone.find(".thumb"),this.thumbImg=this.sisZone.find(".thumb-img")},getThumbnails:function(){var e=this,t=jQuery("input.thumbnails:checked");t.length!=jQuery('input.thumbnails[type="checkbox"]').length&&t.each((function(t){e.thumbnails.push(this.value)}))},getPostTypes:function(){var e=this,t=jQuery("input.post_types:checked");t.length!=jQuery('input.post_types[type="checkbox"]').length&&t.each((function(){e.post_types.push(this.value)}))},setMessage:function(e){this.messageZone.html("<p>"+e+"</p>").addClass("updated").addClass("fade").show()},setTimeMessage:function(e){this.timeZone.html(e)},checkStartRegenerating:function(){if(jQuery(".notSaved").length>0){if(1!=confirm(window.sis.notSaved))return!1;this.startRegenerating()}else this.startRegenerating()},startRegenerating:function(){var e=this,t=jQuery("input.getList").val();e.getThumbnails(),e.getPostTypes(),this.dateScript=new Date,jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"sis_get_list",post_types:e.post_types,nonce:t},beforeSend:function(){e.buttonRegenerate.attr("disabled",!0),e.setMessage(window.sis.reading)},success:function(t){if("object"!=typeof t)return e.reInit(),e.setMessage(window.sis.phpError),!1;e.time.show(),e.total=t.total,e.curr=0,e.progress.show().parent().show(),e.regenItem()}})},regenItem:function(){var e=this,s=jQuery("input.regen").val();if(0==this.total||_.isUndefined(this.total))return this.reInit(),this.setMessage(window.sis.noMedia),!1;if(this.curr>=this.total){var i=new Date;return this.reInit(),void this.setMessage(sis.done+this.curr+" "+window.sis.messageRegenerated+window.sis.startedAt+" "+this.dateScript.getHours()+":"+this.dateScript.getMinutes()+":"+this.dateScript.getSeconds()+window.sis.finishedAt+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds())}this.setMessage(window.sis.regenerating+(this.curr+1)+window.sis.of+this.total),this.setMessage(window.sis.regenerating+(this.curr+1)+window.sis.of+this.total),jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"sis_rebuild_images",offset:this.curr,thumbnails:this.thumbnails,nonce:s},beforeSend:function(){e.percent=e.curr/e.total*100,e.progress.find(".bar").width(e.percent+"%").find(".percent").html(e.percent+"%"),e.percentText.removeClass("hidden").html(Math.round(e.percent)+"%")},success:function(s){if(s.src&&s.time&&!s.error&&"object"==typeof s){s.message&&e.time.find("ul.messages").prepend("<li>"+s.message+"</li>"),e.thumb.show(),e.thumbImg.attr("src",s.src);var i,n,r,a=new Date,o=new Date,d=0,l=0;for(e.timeScript.push(parseFloat(s.time.replace(",","."),10)),i=e.timeScript.length;l<i;l++)d+=e.timeScript[l];n=d/i,t=Math.round(n*e.total*1e3),a.setTime(e.dateScript.getTime()+t),r=e.s2t(Math.abs(a.getTime()-o.getTime())/1e3),e.setTimeMessage(a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+window.sis.or+r+window.sis.beforeEnd)}else{var u;u="object"!=typeof s?window.sis.phpError:s.error,e.errorZone.addClass("error message"),e.errorMessages.prepend("<li>"+u+"</li>")}e.curr++,e.regenItem()}})},s2t:function(e){e%=86400;var t=new Date(1970,0,1),s=0;return t.setSeconds(e),s=t.toTimeString().substr(0,8),e>86399&&(s=Math.floor((t-Date.parse("1/1/70"))/36e5)+s.substr(2)),s},reInit:function(){this.buttonRegenerate.prop("disabled",!1),this.thumb.hide(),this.progress.hide(),this.percentText.addClass("hidden")}},e.sis.sizes={i:0,add:function(t,s){t.preventDefault();var i=e.sis.template("new_size");i=i({size_id:this.i,validate:window.sis.validate}),jQuery(s).closest("tr").before(i),this.i++},register:function(t,s){t.preventDefault();var i=jQuery(s).closest("tr").children("th").find("input").val(),n=jQuery(s).closest("tr").children("th").find("input").attr("id"),r=jQuery(s).closest("tbody").find('input[value="'+i+'"]').length;if("thumbnail"==i||"medium"==i||"large"==i)return alert(window.sis.notOriginal),!1;if(0!=r)return alert(window.sis.alreadyPresent),!1;var a=e.sis.template("new_size_row");a=a({size:window.sis.size,size_name:i,maximumWidth:window.sis.maximumWidth,maximumHeight:window.sis.maximumHeight,customName:window.sis.customName,crop:window.sis.crop,crop_positions:window.sis.crop_positions,show:window.sis.show,deleteImage:window.sis.deleteImage,validateButton:window.sis.validateButton}),jQuery("#"+n).closest("tr").html(a)},deleteSize:function(e,t){e.preventDefault(),1==confirm(window.sis.confirmDelete)&&(jQuery(t).closest("tr").remove(),this.ajaxUnregister(t))},getPhp:function(e,t){e.preventDefault();var s=jQuery(t).closest("tr");jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"sis_get_sizes"},beforeSend:function(){s.removeClass("addPending"),s.addClass("addPending")},success:function(e){jQuery("#get_php").nextAll("code").html("<br />"+e).show().css({display:"block"}),s.removeClass("addPending")}})},ajaxRegister:function(e,t){e.preventDefault();var s,i,n,r=this,a=jQuery(t).closest("table"),o=jQuery(".addSize").val(),d=jQuery(t).closest("tr"),l=d.find('input[name="image_name"]').val(),u=d.find("select.crop").val(),c=d.find("input.show").val(),h=d.find("input.n").val();c=0!=c&&null!=c,n=parseInt(d.find("input.w").val()),i=parseInt(d.find("input.h").val()),a.hasClass("ajaxing")||jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"sis_add_size",width:n,height:i,crop:u,name:l,show:c,customName:h,nonce:o},beforeSend:function(){d.removeClass(),d.addClass("addPending"),a.addClass("ajaxing")},success:function(e){var t="";d.removeClass(),a.removeClass("ajaxing"),0==e?t="errorAdding":2==e?(t="notChangedAdding",r.addToArray(l,n,i,u,t)):(t="successAdding",r.addToArray(l,n,i,u,t)),d.find("input.h").attr({base_h:i}),d.find("input.w").attr({base_w:n}),d.find("select.c").attr({base_c:u}),d.find("input.s").attr({base_s:c}),d.addClass(t),d.find("td").removeClass("notSaved"),d.find(".add_size").removeClass("validate_size").hide().children(".ui-button-text").text(window.sis.update),clearTimeout(s),s=setTimeout((function(){d.removeClass("errorAdding notChangedAdding successAdding")}),2e3)}})},ajaxUnregister:function(e){var t=this,s=jQuery(e).closest("tr").find('input[name="image_name"]').val(),i=jQuery(e).closest("tr").find("input.deleteSize").val();jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"sis_remove_size",name:s,nonce:i},success:function(s){t.removeFromArray(e)}})},addToArray:function(e,t,s,i,n){var r,a=jQuery("#sis-"+e),o="";o=0!=a.length?a.closest("tr"):jQuery("#sis-regen .wrapper > table#sis_sizes > tbody > tr:first").clone().attr("id","sis-"+e),i=_.isUndefined(window.sis.crop_positions[i])?window.sis.fl:window.sis.crop_positions[i],o.find("th > label").attr("for",e).end().find("input.thumbnails").val(e).attr("id",e).end().find("th:nth-child(2) > label").text(e).end().find("th:nth-child(3) > label").text(t+"px").end().find("th:nth-child(4) > label").text(s+"px").end().find("th:nth-child(5) > label").text(i),0==a.length&&o.appendTo("#sis-regen .wrapper > table#sis_sizes > tbody"),o.removeClass("errorAdding notChangedAdding successAdding").addClass(n),clearTimeout(r),r=setTimeout((function(){o.removeClass("errorAdding notChangedAdding successAdding")}),3e3)},removeFromArray:function(e){var t=jQuery(e).closest("tr").find("input[name=image_name]").val();jQuery("#sis-"+t).remove()},displayChange:function(e){var t=(e=jQuery(e)).closest("tr");if(t.hasClass("new_size"))return!1;var s=t.find("input.h"),i=t.find("input.w"),n=t.find("select.c"),r=t.find("input.s"),a=t.find("input.n"),o=s.val(),d=i.val(),l=n.val(),u=r.val(),c=a.val(),h=s.attr("base_h"),p=i.attr("base_w"),f=n.attr("base_c"),g=r.attr("base_s"),m=a.attr("base_n");f="0"!=f,g="0"!=g,o!=h||d!=p||l!=f||u!=g||c!=m?e.closest("td").addClass("notSaved").find(".add_size").css("display","inline-block"):e.closest("td").removeClass("notSaved").find(".add_size").css("display","none")}},e.sis.template=_.memoize((function(e){var t,s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(i){return(t=t||_.template(jQuery("#sis-"+e).html(),null,s))(i)}})),jQuery((function(){e.sis.regenerate.init();var t=jQuery("#wpbody-content");jQuery("#ajax_thumbnail_rebuild").on("click",(function(){e.sis.regenerate.checkStartRegenerating()})),t.on("click","#add_size",(function(t){e.sis.sizes.add(t,this)})).on("click",".add_size_name",(function(t){e.sis.sizes.register(t,this)})).on("click",".delete_size",(function(t){e.sis.sizes.deleteSize(t,this)})).on("click",".add_size",(function(t){e.sis.sizes.ajaxRegister(t,this)})).on("click keyup change",".h,.w,.c,.s,.n",(function(t){e.sis.sizes.displayChange(this)})).on("click","#get_php",(function(t){e.sis.sizes.getPhp(t,this)})),jQuery("#get_php").nextAll("code").hide(),jQuery(".add_size").hide()}))}},s={};function i(t){var n=s[t];if(void 0!==n)return n.exports;var r=s[t]={exports:{}};return e[t](r,r.exports,i),r.exports}(()=>{"use strict";var e;if(window.jQuery,e){if("object"!=typeof e)throw new Error("sis already exists and not an object")}else e={};jQuery((function(){var e=jQuery(document.body),t=null;jQuery('select[name="action"], select[name="action2"]').append(jQuery("<option/>").attr("value","sis-regenerate").text(window.sis.regenerate)),e.on("click",".sis-regenerate-one",(function(e){e.preventDefault(),new t(this)})),jQuery("#doaction, #doaction2").on("click",(function(e){if("sis-regenerate"===jQuery(this).parent().find("select").val()){var s=jQuery('#the-list .check-column input[type="checkbox"]:checked').closest("tr").find(".sis-regenerate-one");s.length>0&&(e.preventDefault(),s.each((function(e,s){new t(this)})))}})),t=function(e){var t={list:{},parent:null,el:null,id:null,messageZone:"",init:function(e){this.el=e,this.parent=e.closest("tr"),this.id=this.el.data("id"),this.list={id:this.id,title:""},this.messageZone=this.parent.find(".title em"),0===this.parent.find(".title em").length&&this.parent.find(".title strong").after("<em/>"),this.messageZone=this.parent.find(".title em"),this.parent.hasClass("ajaxing")||this.regenItem()},setMessage:function(e){this.messageZone.html(" - "+e).addClass("updated").addClass("fade").show()},regenItem:function(){var e=this;jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",cache:!1,data:{action:"sis_rebuild_image",id:this.list.id,nonce:window.sis.regen_one},beforeSend:function(){e.parent.addClass("ajaxing").find(".sis-regenerate-one").hide().end().find(".spinner").addClass("is-active").show(),e.parent.find("a.sis-regenerate-one").closest("tr").fadeTo("fast","0.3")},success:function(t){var s="";s=t.src&&t.time&&!t.error&&"object"==typeof t?window.sis.soloRegenerated.replace("%s",t.time):"object"!=typeof t?s=window.sis.phpError:t.error,e.setMessage(s),e.parent.removeClass("ajaxing").find(".sis-regenerate-one").show().end().find(".spinner").removeClass("is-active").hide(),e.parent.find("a.sis-regenerate-one").closest("tr").fadeTo("fast","1")}})}};t.init(jQuery(e))}})),i(627),i(499)})()})();